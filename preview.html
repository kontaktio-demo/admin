<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Kontaktio – Podgląd widgetu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #020617;
        color: #e5e7eb;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        overflow: hidden;
      }

      .error {
        padding: 40px;
        text-align: center;
        font-size: 18px;
        color: #f87171;
      }
    </style>
  </head>

  <body>
    <script>
      (function () {
        const params = new URLSearchParams(window.location.search);
        const client = params.get("client");

        // ============================
        // Walidacja clientId
        // ============================
        if (!client) {
          document.body.innerHTML =
            '<div class="error">Brak parametru <b>?client=</b></div>';
          return;
        }

        // ============================
        // Ładowanie kontaktio.js
        // ============================
        const script = document.createElement("script");

        // Najnowsza wersja kontaktio.js z GitHuba
        script.src =
          "https://cdn.jsdelivr.net/gh/kontaktio-demo/kontaktio@5d9beb0/kontaktio.js";

        // Atrybuty wymagane przez widget
        script.setAttribute("data-kontaktio", "1");
        script.setAttribute("data-client", client);

        // Backend dynamicznie — działa lokalnie i na Renderze
        script.setAttribute("data-backend", window.location.origin);

        // Opcjonalne auto-open (do testów)
        script.setAttribute("data-auto-open", "true");
        script.setAttribute("data-auto-open-delay", "300");

        document.body.appendChild(script);
      })();
    </script>
  </body>
</html>
